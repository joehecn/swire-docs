<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1400px" preserveAspectRatio="none" style="width:786px;height:1400px;" version="1.1" viewBox="0 0 786 1400" width="786px" zoomAndPan="magnify"><defs><filter height="300%" id="fv0itrqj1zm2i" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[b3c28d35935f3876a80fe695c843767a]
cluster windows--><polygon fill="#FFFFFF" filter="url(#fv0itrqj1zm2i)" points="16,16,26,6,475,6,475,983.5,465,993.5,16,993.5,16,16" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="465" x2="475" y1="16" y2="6"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="465" y1="16" y2="16"/><line style="stroke:#000000;stroke-width:1.5;" x1="465" x2="465" y1="16" y2="993.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="165.5" y="31.9951">本地 Windows 服务器</text><!--MD5=[2644e6386f494d2055ebee00e5be7925]
cluster excel--><polygon fill="#FFFFFF" filter="url(#fv0itrqj1zm2i)" points="317,38,416,38,423,60.2969,426,60.2969,426,109,317,109,317,38" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="317" x2="423" y1="60.2969" y2="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="321" y="52.9951">Excel folder</text><!--MD5=[b1998054c1ba7999bb471b34eb291026]
cluster txt--><polygon fill="#FFFFFF" filter="url(#fv0itrqj1zm2i)" points="206,38,289,38,296,60.2969,299,60.2969,299,109,206,109,206,38" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="206" x2="296" y1="60.2969" y2="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="210" y="52.9951">Txt folder</text><!--MD5=[dfd23b90799ff6bf30fa3aabce10361c]
cluster localdb--><path d="M24,426.5 C24,416.5 137.5,416.5 137.5,416.5 C137.5,416.5 251,416.5 251,426.5 L251,975.5 C251,985.5 137.5,985.5 137.5,985.5 C137.5,985.5 24,985.5 24,975.5 L24,426.5 " fill="#FFFFFF" filter="url(#fv0itrqj1zm2i)" style="stroke:#000000;stroke-width:1.5;"/><path d="M24,426.5 C24,436.5 137.5,436.5 137.5,436.5 C137.5,436.5 251,436.5 251,426.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="32" y="451.4951">Local Mongodb Replica Set</text><!--MD5=[976610ca9a5eadefdf5ca97519844eee]
cluster linux--><polygon fill="#FFFFFF" filter="url(#fv0itrqj1zm2i)" points="483,778.5,493,768.5,769,768.5,769,1251.5,759,1261.5,483,1261.5,483,778.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="759" x2="769" y1="778.5" y2="768.5"/><line style="stroke:#000000;stroke-width:1.5;" x1="483" x2="759" y1="778.5" y2="778.5"/><line style="stroke:#000000;stroke-width:1.5;" x1="759" x2="759" y1="778.5" y2="1261.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="517" y="794.4951">线上服务器 172.105.202.170</text><!--MD5=[670a7a1f521ac73274266eeead13f881]
entity mssql--><path d="M65,70.5 C65,60.5 122,60.5 122,60.5 C122,60.5 179,60.5 179,70.5 L179,95.7969 C179,105.7969 122,105.7969 122,105.7969 C122,105.7969 65,105.7969 65,95.7969 L65,70.5 " fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" style="stroke:#000000;stroke-width:1.5;"/><path d="M65,70.5 C65,80.5 122,80.5 122,80.5 C122,80.5 179,80.5 179,70.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="75" y="97.4951">Microsoft SQL</text><!--MD5=[73ca96ba5138b7bb33dba1da3d0e470d]
entity schedule--><rect fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" height="86.8906" style="stroke:#A80036;stroke-width:1.5;" width="211" x="185.5" y="228.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="376.5" y="233.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="374.5" y="235.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="374.5" y="239.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="200.5" y="261.4951">schedule</text><line style="stroke:#A80036;stroke-width:1.0;" x1="186.5" x2="395.5" y1="264.7969" y2="264.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="200.5" y="281.792">1. 定时抓取并处理本地数据</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="200.5" y="298.0889">2. 实时监控和处理线上请求</text><!--MD5=[294dd4295b3538d2597418482775d5c9]
entity shake--><rect fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" height="70.5938" style="stroke:#A80036;stroke-width:1.5;" width="208" x="259" y="642.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="447" y="647.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="445" y="649.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="445" y="653.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="274" y="675.4951">Mongo Shake</text><line style="stroke:#A80036;stroke-width:1.0;" x1="260" x2="466" y1="678.7969" y2="678.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="274" y="695.792">单向同步数据到线上数据库</text><!--MD5=[5e28904cfe1c649a71fa9ba5e99b96e2]
entity Excel--><polygon fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" points="326,65,326,101.2969,382,101.2969,382,75,372,65,326,65" style="stroke:#000000;stroke-width:1.5;"/><path d="M372,65 L372,75 L382,75 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="336" y="87.9951">Excel</text><!--MD5=[8b5e1a0da03b0da7632d9e511fe0fc43]
entity Txt--><polygon fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" points="214.5,65,214.5,101.2969,255.5,101.2969,255.5,75,245.5,65,214.5,65" style="stroke:#000000;stroke-width:1.5;"/><path d="M245.5,65 L245.5,75 L255.5,75 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="224.5" y="87.9951">Txt</text><!--MD5=[8e613d614b23a976aeefc2e13d7e1e88]
entity arbiter--><path d="M39,468.5 C39,458.5 71,458.5 71,458.5 C71,458.5 103,458.5 103,468.5 L103,493.7969 C103,503.7969 71,503.7969 71,503.7969 C71,503.7969 39,503.7969 39,493.7969 L39,468.5 " fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" style="stroke:#000000;stroke-width:1.5;"/><path d="M39,468.5 C39,478.5 71,478.5 71,478.5 C71,478.5 103,478.5 103,468.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="49" y="495.4951">arbiter</text><!--MD5=[bd39a4c76d4729f7d3a505ada56cb8c7]
entity primary--><path d="M173,468.5 C173,458.5 208,458.5 208,458.5 C208,458.5 243,458.5 243,468.5 L243,493.7969 C243,503.7969 208,503.7969 208,503.7969 C208,503.7969 173,503.7969 173,493.7969 L173,468.5 " fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" style="stroke:#000000;stroke-width:1.5;"/><path d="M173,468.5 C173,478.5 208,478.5 208,478.5 C208,478.5 243,478.5 243,468.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="183" y="495.4951">primary</text><!--MD5=[ca68d2e3dfee2ff470ce8e9333c0d544]
entity secondary--><path d="M32,942.5 C32,932.5 78,932.5 78,932.5 C78,932.5 124,932.5 124,942.5 L124,967.7969 C124,977.7969 78,977.7969 78,977.7969 C78,977.7969 32,977.7969 32,967.7969 L32,942.5 " fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" style="stroke:#000000;stroke-width:1.5;"/><path d="M32,942.5 C32,952.5 78,952.5 78,952.5 C78,952.5 124,952.5 124,942.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="42" y="969.4951">secondary</text><!--MD5=[08af8945a84acfe1eabc0963aa87c412]
entity web--><rect fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="217" x="517.5" y="1207.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="714.5" y="1212.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="712.5" y="1214.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="712.5" y="1218.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="532.5" y="1240.4951">前台 swire.enermon.cloud</text><!--MD5=[8c5a6473d0402e601d65832b879e3c77]
entity energy--><rect fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="120" x="566" y="1038.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="666" y="1043.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="664" y="1045.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="664" y="1049.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="581" y="1071.4951">后台 energy</text><!--MD5=[7468467f3b6b392f1d176d828c753b77]
entity db--><path d="M622,823.5 C622,813.5 665,813.5 665,813.5 C665,813.5 708,813.5 708,823.5 L708,848.7969 C708,858.7969 665,858.7969 665,858.7969 C665,858.7969 622,858.7969 622,848.7969 L622,823.5 " fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" style="stroke:#000000;stroke-width:1.5;"/><path d="M622,823.5 C622,833.5 665,833.5 665,833.5 C665,833.5 708,833.5 708,823.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="632" y="850.4951">Mongodb</text><!--MD5=[e29745d789d1cd237fb5892a53e7b9d1]
entity kafka--><rect fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" height="70.5938" style="stroke:#A80036;stroke-width:1.5;" width="96" x="491" y="800.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="567" y="805.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="565" y="807.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="565" y="811.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="506" y="833.4951">Kafka</text><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="586" y1="836.7969" y2="836.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="506" y="853.792">消息队列</text><!--MD5=[8fc3522a43f8c7199df5e09e5bb0188e]
entity user--><ellipse cx="626" cy="1324" fill="#FEFECE" filter="url(#fv0itrqj1zm2i)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><path d="M626,1332 L626,1359 M613,1340 L639,1340 M626,1359 L613,1374 M626,1359 L639,1374 " fill="none" filter="url(#fv0itrqj1zm2i)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="610.5" y="1392.4951">user</text><!--MD5=[ae93cba451dc69f119472b40e0674480]
link mssql to schedule--><path d="M142.3853,105.7978 C168.4743,134.9742 214.3438,186.2721 248.2432,224.1832 " fill="none" id="mssql-to-schedule" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="251.8996,228.2723,248.8823,218.897,248.5668,224.5451,242.9187,224.2295,251.8996,228.2723" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0dbc8509c2bfa1eed15664e3accf0e4e]
link excel to schedule--><path d="M400,109 C374.3026,147.8616 344.9295,191.7565 323.1548,224.197 " fill="none" id="excel-to-schedule" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="320.2688,228.4958,328.6062,223.2529,323.0557,224.3445,321.9641,218.794,320.2688,228.4958" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[9b55868552ef094c06c8bdf4d7495233]
link txt to schedule--><path d="M291,109.4031 C291,109.7407 291,110.0808 291,110.4234 C291,111.1085 291,111.8033 291,112.5075 C291,113.9158 291,115.3614 291,116.8415 C291,122.7616 291,129.2319 291,136.0623 C291,163.3839 291,196.4679 291,223.1565 " fill="none" id="txt-to-schedule" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="291,228.2389,295,219.2389,291,223.2389,287,219.2389,291,228.2389" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[481893dbcb530bd42beba0e73803945a]
link schedule to localdb--><path d="M239.6408,315.5145 C225.456,328.7877 209.926,344.4556 195.2522,361.5944 C187.9153,370.1638 180.7923,379.101 174.1586,388.2904 C170.8417,392.8851 167.6471,397.5429 164.6092,402.2493 C163.0903,404.6025 161.6105,406.9679 160.1742,409.3436 C159.4561,410.5314 158.7488,411.7219 158.0529,412.9147 C157.705,413.5111 157.3599,414.1081 157.0177,414.7057 C156.8466,415.0044 156.6762,415.3034 156.5066,415.6024 C156.4218,415.7519 156.3372,415.9015 156.2528,416.0511 " fill="none" id="schedule-to-localdb" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="156.2528,416.0511,164.1601,410.1796,158.7105,411.6969,157.1933,406.2473,156.2528,416.0511" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[93b5e1091a069314c0b8172f4575c299]
link localdb to shake--><path d="M251.1036,590.4931 C252.7811,591.8989 254.4527,593.2949 256.1175,594.6805 C262.7765,600.2229 269.3261,605.5985 275.7022,610.7718 C288.4545,621.1183 300.5133,630.6553 311.3675,639.0974 " fill="none" id="localdb-to-shake" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="315.5078,642.3101,310.8494,633.6326,311.5575,639.2449,305.9451,639.9531,315.5078,642.3101" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c1e399a5d37d9cd0207df1e0036f151e]
link shake to kafka--><path d="M388.8468,713.5545 C400.8051,728.8399 415.7296,746.3941 431,760.5 C447.8088,776.0269 467.9698,790.9463 486.2976,803.3627 " fill="none" id="shake-to-kafka" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="490.9145,806.4643,485.6744,798.1251,486.7641,803.676,481.2132,804.7657,490.9145,806.4643" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="432" y="756.5669">端口 27017</text><path d="M431.3961,770.4922 A10,10 0 0 0 440.9922 760.1039" fill="#FFFFFF" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="431" cy="760.5" fill="#FFFFFF" rx="6" ry="6" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[9725d5c52752689ddccc35215a965616]
reverse link schedule to kafka--><path d="M401.6267,300.1913 C463.7826,319.3877 529,346.7395 529,377 C529,377 529,377 529,678 C529,720.0527 532.5719,768.2758 535.4462,800.2728 " fill="none" id="schedule-backto-kafka" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="396.7763,298.7077,404.2126,305.1654,401.5576,300.1703,406.5527,297.5153,396.7763,298.7077" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="530" y="546.5669">端口 27017</text><path d="M536.0711,670.9289 A10,10 0 0 0 521.9289 670.9289" fill="#FFFFFF" style="stroke:#0000FF;stroke-width:1.5;"/><ellipse cx="529" cy="678" fill="#FFFFFF" rx="6" ry="6" style="stroke:#0000FF;stroke-width:1.5;"/><!--MD5=[f0d0ed801e36bdb21ab36d381282f7d6]
link kafka to energy--><path d="M543.1733,871.7311 C556.033,916.6023 585.6573,992.6475 606.45,1033.5228 " fill="none" id="kafka-to-energy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="608.9402,1038.3287,608.3514,1028.4975,606.64,1033.8892,601.2482,1032.1778,608.9402,1038.3287" style="stroke:#A80036;stroke-width:1.0;"/><path d="M567.8231,963.2846 A10,10 0 0 0 580.9959 958.1391" fill="#FFFFFF" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="571.8368" cy="954.1254" fill="#FFFFFF" rx="6" ry="6" style="stroke:#A80036;stroke-width:1.5;"/><!--MD5=[cb04423f59171004d3d5c7364c0a25c2]
reverse link kafka to energy--><path d="M565.2701,876.4913 C587.8867,923.7238 616.7051,1000.1913 625.6581,1038.3287 " fill="none" id="kafka-backto-energy" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="562.9629,871.7311,563.289,881.5746,565.1438,876.2304,570.4879,878.0852,562.9629,871.7311" style="stroke:#0000FF;stroke-width:1.0;"/><path d="M604.7313,951.7194 A10,10 0 0 0 591.4867 956.6773" fill="#FFFFFF" style="stroke:#0000FF;stroke-width:1.5;"/><ellipse cx="600.588" cy="960.8207" fill="#FFFFFF" rx="6" ry="6" style="stroke:#0000FF;stroke-width:1.5;"/><!--MD5=[678ab4e4a9def5d5f86c03b141b961f1]
link db to energy--><path d="M652.9699,858.8631 C639.8085,900.3718 624.4131,988.0035 622.0985,1033.2069 " fill="none" id="db-to-energy" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="621.89,1038.2391,626.2592,1029.4124,622.097,1033.2434,618.266,1029.0812,621.89,1038.2391" style="stroke:#008000;stroke-width:1.0;"/><!--MD5=[855d9230e55039dc1e3eac7fef489d06]
reverse link db to energy--><path d="M669.4374,863.8627 C667.5321,908.7951 652.1594,996.4376 638.6343,1038.2391 " fill="none" id="db-backto-energy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="669.5969,858.8631,665.312,867.731,669.4375,863.8606,673.3079,867.9861,669.5969,858.8631" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[20722876e6dadf27d121116923e044b0]
link energy to web--><path d="M616.9015,1084.6444 C612.2796,1115.2784 612.0453,1169.2545 616.1986,1202.2551 " fill="none" id="energy-to-web" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="616.9029,1207.3646,619.6363,1197.9026,616.22,1202.4114,611.7112,1198.9952,616.9029,1207.3646" style="stroke:#008000;stroke-width:1.0;"/><!--MD5=[43f43e8f0c3ff4530de384b03c79d848]
reverse link energy to web--><path d="M636.3792,1089.7546 C640.7759,1122.7592 640.5269,1176.7352 635.6323,1207.3646 " fill="none" id="energy-backto-web" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="635.6337,1084.6444,632.9752,1094.1277,636.3557,1089.592,640.8913,1092.9725,635.6337,1084.6444" style="stroke:#0000FF;stroke-width:1.0;"/><!--MD5=[b8bb4ea9537ae551ae4db45a3eff5dc2]
link web to user--><path d="M615.8229,1253.6257 C613.4322,1269.181 612.7075,1290.2175 613.649,1309.0955 " fill="none" id="web-to-user" style="stroke:#008000;stroke-width:1.0;"/><polygon fill="#008000" points="613.9587,1314.3565,617.4226,1305.1369,613.6647,1309.3652,609.4364,1305.6073,613.9587,1314.3565" style="stroke:#008000;stroke-width:1.0;"/><!--MD5=[3c8194be897d119737f0a87f1b26a7c9]
reverse link web to user--><path d="M637.4989,1258.5767 C639.6499,1275.0341 640.0668,1296.1092 638.7496,1314.3565 " fill="none" id="web-backto-user" style="stroke:#0000FF;stroke-width:1.0;"/><polygon fill="#0000FF" points="636.7757,1253.6257,634.1189,1263.1094,637.4986,1258.5732,642.0348,1261.9529,636.7757,1253.6257" style="stroke:#0000FF;stroke-width:1.0;"/><!--MD5=[c1cc5f351e3b1b530bbea1e94f298d0a]
link arbiter to primary--><!--MD5=[646f079785c1a82ee6f637aa7f2a1e2b]
link arbiter to secondary--><!--MD5=[58ca374be23769c26ea50c09e3ade107]
@startuml end
  ' 定义变量 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
  ' 本地 windows 服务器
  node "本地 Windows 服务器" as windows {
    ' MS Sql
    database "Microsoft SQL" as mssql
    ' Excel file
    folder "Excel folder" as excel {
      file "Excel"
    }
    ' Txt file
    folder "Txt folder" as txt {
      file "Txt"
    }

    ' 定时抓取数据
    component schedule [
      <b>schedule
      - - - -
      1. 定时抓取并处理本地数据
      2. 实时监控和处理线上请求
    ]

    ' Local Mongodb
    database "Local Mongodb Replica Set" as localdb {
      database arbiter
      database primary
      database secondary
    }
    ' 单项同步
    component shake [
      <b>Mongo Shake
      - - - -
      单向同步数据到线上数据库
    ]
  }

  ' 线上 linux 服务器 http://swire.enermon.cloud/
  node "线上服务器 172.105.202.170" as linux {
    ' web
    component "前台 swire.enermon.cloud" as web
    component "后台 energy" as energy

    database "Mongodb" as db
    ' 消息队列
    component kafka [
      <b>Kafka
      - - - -
      消息队列
    ]
  }

  actor user

  ' 关系
  mssql - -> schedule
  excel - -> schedule
  txt - -> schedule
  schedule - -> localdb
  localdb - -> shake

  shake -0)-> kafka : 端口 27017
  schedule <-[#blue](0- kafka : 端口 27017

  kafka -0)-> energy
  kafka <-[#blue](0- energy

  db -[#green]-> energy
  db <- - energy

  energy -[#green]-> web
  energy <-[#blue]- web

  web -[#green]-> user
  web <-[#blue]- user
  
@enduml

@startuml end
  node "本地 Windows 服务器" as windows {
    database "Microsoft SQL" as mssql
    folder "Excel folder" as excel {
      file "Excel"
    }
    folder "Txt folder" as txt {
      file "Txt"
    }

    component schedule [
      <b>schedule
      - - - -
      1. 定时抓取并处理本地数据
      2. 实时监控和处理线上请求
    ]

    database "Local Mongodb Replica Set" as localdb {
      database arbiter
      database primary
      database secondary
    }
    component shake [
      <b>Mongo Shake
      - - - -
      单向同步数据到线上数据库
    ]
  }

  node "线上服务器 172.105.202.170" as linux {
    component "前台 swire.enermon.cloud" as web
    component "后台 energy" as energy

    database "Mongodb" as db
    component kafka [
      <b>Kafka
      - - - -
      消息队列
    ]
  }

  actor user

  mssql - -> schedule
  excel - -> schedule
  txt - -> schedule
  schedule - -> localdb
  localdb - -> shake

  shake -0)-> kafka : 端口 27017
  schedule <-[#blue](0- kafka : 端口 27017

  kafka -0)-> energy
  kafka <-[#blue](0- energy

  db -[#green]-> energy
  db <- - energy

  energy -[#green]-> web
  energy <-[#blue]- web

  web -[#green]-> user
  web <-[#blue]- user
  
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>